{"code":"!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=1)}([function(e,t){var n;n=function(){return this}();try{n=n||new Function(\"return this\")()}catch(e){\"object\"==typeof window&&(n=window)}e.exports=n},function(e,t,n){(function(n){var r,o,i;!function(a){var c,s;function u(){return\"translate(\"+s.x+\"px,\"+s.y+\"px) scale(\"+s.scale+\") rotate(\"+s.deg+\"deg)\"}function l(){(function(){const e=document.createElement(\"div\");e.classList.add(\"cropme-container\"),e.style.width=c.container.width+\"px\",e.style.height=c.container.height+\"px\",s.container=e,s.wrapper.appendChild(e)}).call(this),function(){const e=document.createElement(\"div\");e.classList.add(\"cropme-slider\");const t=s.slider=document.createElement(\"input\");t.type=\"range\",t.setAttribute(\"min\",.01),t.setAttribute(\"max\",1.5),t.setAttribute(\"step\",1e-6),t.style.width=c.container.width+\"px\",e.appendChild(t),s.wrapper.appendChild(e)}.call(this),function(){const e=s.image=document.createElement(\"img\");e.ondragstart=(()=>!1),s.container.appendChild(e)}.call(this),function(){const e=s.viewport=document.createElement(\"div\");c.viewport.width=c.viewport.width>c.container.width?c.container.width:c.viewport.width,c.viewport.height=c.viewport.height>c.container.height?c.container.height:c.viewport.height,e.style.width=c.viewport.width+\"px\",e.style.height=c.viewport.height+\"px\",e.className=\"viewport\",\"circle\"===c.viewport.type&&(e.className=\"viewport circle\");let t=0;if(c.viewport.border){let e=(c.container.width-c.viewport.width)/2;t=e<s.viewport.clientLeft?e:s.viewport.clientLeft}s.viewport.style.borderWidth=t+\"px\",s.viewport.border=t,s.container.appendChild(e)}.call(this);let e,t,n=0,r=0;function o(e){if(e.touches){let t=e.touches[0];e.pageX=t.pageX,e.pageY=t.pageY}return e}let i=function(i){i.preventDefault(),i=o(i),n=s.x||n,r=s.y||r,e=i.pageX-n,t=i.pageY-r,document.addEventListener(\"mousemove\",a),document.addEventListener(\"touchmove\",a)};s.image.addEventListener(\"mousedown\",i),s.image.addEventListener(\"touchstart\",i);let a=function(n){if(n.preventDefault(),(n=o(n)).touches&&n.touches.length>1){let e=n.touches[1],t=n.touches[0],r=t.pageX-e.pageX,o=t.pageY-e.pageY,i=90-180*Math.atan(r/o)/Math.PI;s.odeg||(s.odeg=i-s.deg),s.deg=i-s.odeg;let a=Math.sqrt(Math.pow(r,2)+Math.pow(o,2));s.od||(s.od=a/s.scale),s.scale=s.slider.value=a/s.od}s.x=n.pageX-e,s.y=n.pageY-t,s.image.style.transform=u()},l=function(){document.removeEventListener(\"touchmove\",a),document.removeEventListener(\"mousemove\",a),s.od=0,s.odeg=0};document.addEventListener(\"mouseup\",l),document.addEventListener(\"touchend\",l),s.slider.addEventListener(\"input\",function(e){s.scale=parseFloat(e.target.value),s.image.style.transform=u()});s.container.addEventListener(\"mousewheel\",function(e){e.preventDefault(),s.scale=s.slider.value=s.scale+e.wheelDelta/1200*s.scale,s.image.style.transform=u()})}!function(){\"use strict\";function e(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){return t.reject(n)})})}function t(){}function r(e){if(!(this instanceof r))throw new TypeError(\"Promises must be constructed via new\");if(\"function\"!=typeof e)throw new TypeError(\"not a function\");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(e,this)}function o(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,r._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void c(t.promise,e)}i(t.promise,r)}else(1===e._state?i:c)(t.promise,e._value)})):e._deferreds.push(t)}function i(e,t){try{if(t===e)throw new TypeError(\"A promise cannot be resolved with itself.\");if(t&&(\"object\"==typeof t||\"function\"==typeof t)){var n=t.then;if(t instanceof r)return e._state=3,e._value=t,void s(e);if(\"function\"==typeof n)return void u(function(e,t){return function(){e.apply(t,arguments)}}(n,t),e)}e._state=1,e._value=t,s(e)}catch(t){c(e,t)}}function c(e,t){e._state=2,e._value=t,s(e)}function s(e){2===e._state&&0===e._deferreds.length&&r._immediateFn(function(){e._handled||r._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;n>t;t++)o(e,e._deferreds[t]);e._deferreds=null}function u(e,t){var n=!1;try{e(function(e){n||(n=!0,i(t,e))},function(e){n||(n=!0,c(t,e))})}catch(e){if(n)return;n=!0,c(t,e)}}var l=setTimeout;r.prototype.catch=function(e){return this.then(null,e)},r.prototype.then=function(e,n){var r=new this.constructor(t);return o(this,new function(e,t,n){this.onFulfilled=\"function\"==typeof e?e:null,this.onRejected=\"function\"==typeof t?t:null,this.promise=n}(e,n,r)),r},r.prototype.finally=e,r.all=function(e){return new r(function(t,n){function r(e,a){try{if(a&&(\"object\"==typeof a||\"function\"==typeof a)){var c=a.then;if(\"function\"==typeof c)return void c.call(a,function(t){r(e,t)},n)}o[e]=a,0==--i&&t(o)}catch(e){n(e)}}if(!e||void 0===e.length)throw new TypeError(\"Promise.all accepts an array\");var o=Array.prototype.slice.call(e);if(0===o.length)return t([]);for(var i=o.length,a=0;o.length>a;a++)r(a,o[a])})},r.resolve=function(e){return e&&\"object\"==typeof e&&e.constructor===r?e:new r(function(t){t(e)})},r.reject=function(e){return new r(function(t,n){n(e)})},r.race=function(e){return new r(function(t,n){for(var r=0,o=e.length;o>r;r++)e[r].then(t,n)})},r._immediateFn=\"function\"==typeof n&&function(e){n(e)}||function(e){l(e,0)},r._unhandledRejectionFn=function(e){void 0!==console&&console&&console.warn(\"Possible Unhandled Promise Rejection:\",e)};var f=function(){if(\"undefined\"!=typeof self)return self;if(\"undefined\"!=typeof window)return window;if(void 0!==a)return a;throw Error(\"unable to locate global object\")}();\"Promise\"in f?f.Promise.prototype.finally||(f.Promise.prototype.finally=e):f.Promise=r}(),e.exports=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p=\"\",t(0)}([function(e,t,n){\"use strict\";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function e(t){for(var n=arguments.length,a=Array(n>1?n-1:0),c=1;c<n;c++)a[c-1]=arguments[c];if(!a.length)return t;var s=a.shift();if((0,o.isObject)(t)&&(0,o.isObject)(s))for(var u in s)(0,o.isObject)(s[u])?(t[u]||Object.assign(t,r({},u,{})),e(t[u],s[u])):(0,i.isArray)(s[u])?(t[u]||Object.assign(t,r({},u,[])),t[u]=t[u].concat(s[u])):Object.assign(t,r({},u,s[u]));return e.apply(void 0,[t].concat(a))};var o=n(1),i=n(2);e.exports=t.default},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e};t.isObject=function(e){return e&&\"object\"===(void 0===e?\"undefined\":n(e))&&!Array.isArray(e)}},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.isArray=function(e){return e&&Array.isArray(e)}}]),window.jQuery&&(jQuery.fn.cropme=function(e,t){if(\"object\"==typeof e)return this.each(function(){var t=new f(this,e);$(this).data(\"cropme\",t)});if(\"string\"==typeof e){let n=this.data(\"cropme\");if(\"position\"===e)return n.position();if(\"bind\"===e)return n.bind(t);if(\"export\"===e)return n.export(t);if(\"rotate\"===e)return n.rotate(t);if(\"destroy\"===e)return n.destroy();throw\"Error: \"+e+\" method not found\"}throw\"Error: the argument must be an object or a string\"});class f{constructor(e,t){if(e.className.indexOf(\"cropme-wrapper\")>-1)throw\"Error: Cropme is already initialized\";e.classList.add(\"cropme-wrapper\"),this.properties={},(s=this.properties).wrapper=e,c=s.options=nestedObjectAssign(d,t),l.call(this)}bind(e){s.image.src=e.url,s.image.onload=function(){let t=s.image.getBoundingClientRect(),n=s.container.getBoundingClientRect(),r=(n.width-t.width)/2,o=(n.height-t.height)/2;s.ox=r,s.oy=o,\"object\"==typeof e.position&&(r=e.position.x||r,o=e.position.y||o);let i=e.scale?e.scale:n.height/t.height;s.x=r,s.y=o,s.scale=i,s.slider.value=i,s.deg=e.deg||0,s.image.style.transform=u(),s.image.style.opacity=1}}rotate(e){s.deg=e,s.image.style.transform=u()}export(e){let t=function(e){let t=document.createElement(\"canvas\"),n=t.getContext(\"2d\"),r=c.viewport.width,o=c.viewport.height;\"object\"==typeof e&&(e.scale?(r*=e.scale,o*=e.scale):e.width&&(o=e.width*o/r,r=e.width)),t.width=r,t.height=o;const i=r/c.viewport.width,a=o/c.viewport.height,l=s.deg,f=s.x,d=s.y;function p(e,t,n){s.deg=e,s.x=t,s.y=n,s.image.style.transform=u()}0!==l&&p.call(this,0,s.ox,s.oy);const h=s.image.getBoundingClientRect(),m=s.viewport.getBoundingClientRect(),v=i*(h.x-m.x-s.viewport.border),y=a*(h.y-m.y-s.viewport.border);if(0!==l&&(n.translate((f-s.x)*i,(d-s.y)*a),n.translate(r/2,o/2),n.rotate(l*Math.PI/180),n.translate(-r/2,-o/2)),n.drawImage(s.image,v,y,h.width*i,h.height*a),\"circle\"===c.viewport.type){n.translate(r/2,o/2),n.rotate(-l*Math.PI/180),n.translate(-r/2,-o/2),n.scale(1,c.viewport.height/c.viewport.width);let e=(c.viewport.width-c.viewport.height)/2*i,t=(s.x-f)*i,u=(s.y-d)*a;e>0?u=e+2*u:e<0&&(u=e+u/2),n.translate(t,u),n.globalCompositeOperation=\"destination-in\",n.arc(r/2,o/2,r/2,0,2*Math.PI),n.fill()}return\"triangle\"===c.viewport.type&&(n.translate(r/2,o/2),n.rotate(-l*Math.PI/180),n.translate(-r/2,-o/2),n.translate((s.x-f)*i,(s.y-d)*a),n.beginPath(),n.globalCompositeOperation=\"destination-in\",n.moveTo(r/2,0),n.lineTo(r,o),n.lineTo(0,o),n.closePath(),n.fill()),p.call(this,l,f,d),t}.call(this,e);return e=\"object\"==typeof e?e.type:e,new Promise(n=>{\"blob\"===e?t.toBlob(e=>n(URL.createObjectURL(e))):n(t.toDataURL())})}position(){return{x:s.x,y:s.y,scale:s.scale,deg:parseInt(s.deg)}}destroy(){s.wrapper.innerHTML=\"\",s.wrapper.className=s.wrapper.className.replace(\"cropme-wrapper\",\"\"),delete this.properties}}const d={container:{width:300,height:300},viewport:{width:100,height:100}};\"object\"==typeof e.exports?e.exports=f:(o=[],void 0===(i=\"function\"==typeof(r=f)?r.apply(t,o):r)||(e.exports=i))}(window)}).call(this,n(2).setImmediate)},function(e,t,n){(function(e){var r=void 0!==e&&e||\"undefined\"!=typeof self&&self||window,o=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(o.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new i(o.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(3),t.setImmediate=\"undefined\"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate=\"undefined\"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(0))},function(e,t,n){(function(e,t){!function(e,n){\"use strict\";if(!e.setImmediate){var r,o,i,a,c,s=1,u={},l=!1,f=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,\"[object process]\"==={}.toString.call(e.process)?r=function(e){t.nextTick(function(){h(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage(\"\",\"*\"),e.onmessage=n,t}}()?e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){h(e.data)},r=function(e){i.port2.postMessage(e)}):f&&\"onreadystatechange\"in f.createElement(\"script\")?(o=f.documentElement,r=function(e){var t=f.createElement(\"script\");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,o.removeChild(t),t=null},o.appendChild(t)}):r=function(e){setTimeout(h,0,e)}:(a=\"setImmediate$\"+Math.random()+\"$\",c=function(t){t.source===e&&\"string\"==typeof t.data&&0===t.data.indexOf(a)&&h(+t.data.slice(a.length))},e.addEventListener?e.addEventListener(\"message\",c,!1):e.attachEvent(\"onmessage\",c),r=function(t){e.postMessage(a+t,\"*\")}),d.setImmediate=function(e){\"function\"!=typeof e&&(e=new Function(\"\"+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return u[s]=o,r(s),s++},d.clearImmediate=p}function p(e){delete u[e]}function h(e){if(l)setTimeout(h,0,e);else{var t=u[e];if(t){l=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{p(e),l=!1}}}}}(\"undefined\"==typeof self?void 0===e?this:e:self)}).call(this,n(0),n(4))},function(e,t){var n,r,o=e.exports={};function i(){throw new Error(\"setTimeout has not been defined\")}function a(){throw new Error(\"clearTimeout has not been defined\")}function c(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n=\"function\"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r=\"function\"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var s,u=[],l=!1,f=-1;function d(){l&&s&&(l=!1,s.length?u=s.concat(u):f=-1,u.length&&p())}function p(){if(!l){var e=c(d);l=!0;for(var t=u.length;t;){for(s=u,u=[];++f<t;)s&&s[f].run();f=-1,t=u.length}s=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||l||c(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title=\"browser\",o.browser=!0,o.env={},o.argv=[],o.version=\"\",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error(\"process.binding is not supported\")},o.cwd=function(){return\"/\"},o.chdir=function(e){throw new Error(\"process.chdir is not supported\")},o.umask=function(){return 0}}]);","extractedComments":[]}