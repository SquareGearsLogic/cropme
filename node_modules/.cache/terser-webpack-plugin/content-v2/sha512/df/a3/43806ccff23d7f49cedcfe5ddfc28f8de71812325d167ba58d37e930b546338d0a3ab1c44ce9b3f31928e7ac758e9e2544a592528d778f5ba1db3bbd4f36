{"code":"!function(e){var t={};function i(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var n in e)i.d(o,n,function(t){return e[t]}.bind(null,n));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,\"a\",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p=\"\",i(i.s=0)}([function(e,t,i){const o=i(1);console.log(o)},function(e,t,i){var o,n,r;!function(i){var a,l;function s(){return\"translate(\"+l.x+\"px,\"+l.y+\"px) scale(\"+l.scale+\") rotate(\"+l.deg+\"deg)\"}function c(){(function(){const e=document.createElement(\"div\");e.classList.add(\"cropme-container\"),e.style.width=a.container.width+\"px\",e.style.height=a.container.height+\"px\",l.container=e,l.wrapper.appendChild(e)}).call(this),function(){const e=document.createElement(\"div\");e.classList.add(\"cropme-slider\");const t=l.slider=document.createElement(\"input\");t.type=\"range\",t.setAttribute(\"min\",.01),t.setAttribute(\"max\",1.5),t.setAttribute(\"step\",1e-6),t.style.width=a.container.width+\"px\",e.appendChild(t),l.wrapper.appendChild(e)}.call(this),function(){const e=l.image=document.createElement(\"img\");e.ondragstart=(()=>!1),l.container.appendChild(e)}.call(this),function(){const e=l.viewport=document.createElement(\"div\");a.viewport.width=a.viewport.width>a.container.width?a.container.width:a.viewport.width,a.viewport.height=a.viewport.height>a.container.height?a.container.height:a.viewport.height,e.style.width=a.viewport.width+\"px\",e.style.height=a.viewport.height+\"px\",e.className=\"viewport\",\"circle\"===a.viewport.type&&(e.className=\"viewport circle\");let t=0;if(a.viewport.border){let e=(a.container.width-a.viewport.width)/2;t=e<l.viewport.clientLeft?e:l.viewport.clientLeft}l.viewport.style.borderWidth=t+\"px\",l.viewport.border=t,l.container.appendChild(e)}.call(this);let e,t,i=0,o=0;function n(e){if(e.touches){let t=e.touches[0];e.pageX=t.pageX,e.pageY=t.pageY}return e}let r=function(r){r.preventDefault(),r=n(r),i=l.x||i,o=l.y||o,e=r.pageX-i,t=r.pageY-o,document.addEventListener(\"mousemove\",c),document.addEventListener(\"touchmove\",c)};l.image.addEventListener(\"mousedown\",r),l.image.addEventListener(\"touchstart\",r);let c=function(i){if(i.preventDefault(),(i=n(i)).touches&&i.touches.length>1){let e=i.touches[1],t=i.touches[0],o=t.pageX-e.pageX,n=t.pageY-e.pageY,r=90-180*Math.atan(o/n)/Math.PI;l.odeg||(l.odeg=r-l.deg),l.deg=r-l.odeg;let a=Math.sqrt(Math.pow(o,2)+Math.pow(n,2));l.od||(l.od=a/l.scale),l.scale=l.slider.value=a/l.od}l.x=i.pageX-e,l.y=i.pageY-t,l.image.style.transform=s()},p=function(){document.removeEventListener(\"touchmove\",c),document.removeEventListener(\"mousemove\",c),l.od=0,l.odeg=0};document.addEventListener(\"mouseup\",p),document.addEventListener(\"touchend\",p),l.slider.addEventListener(\"input\",function(e){l.scale=parseFloat(e.target.value),l.image.style.transform=s()});l.container.addEventListener(\"mousewheel\",function(e){e.preventDefault(),l.scale=l.slider.value=l.scale+e.wheelDelta/1200*l.scale,l.image.style.transform=s()})}class p{constructor(e,t){if(e.className.indexOf(\"cropme-wrapper\")>-1)throw\"Error: Cropme is already initialized\";e.classList.add(\"cropme-wrapper\"),this.properties={},(l=this.properties).wrapper=e,a=l.options=nestedObjectAssign(d,t),c.call(this)}bind(e){l.image.src=e.url,l.image.onload=function(){let t=l.image.getBoundingClientRect(),i=l.container.getBoundingClientRect(),o=(i.width-t.width)/2,n=(i.height-t.height)/2;l.ox=o,l.oy=n,\"object\"==typeof e.position&&(o=e.position.x||o,n=e.position.y||n);let r=e.scale?e.scale:i.height/t.height;l.x=o,l.y=n,l.scale=r,l.slider.value=r,l.deg=e.deg||0,l.image.style.transform=s(),l.image.style.opacity=1}}rotate(e){l.deg=e,l.image.style.transform=s()}export(e){let t=function(e){let t=document.createElement(\"canvas\"),i=t.getContext(\"2d\"),o=a.viewport.width,n=a.viewport.height;\"object\"==typeof e&&(e.scale?(o*=e.scale,n*=e.scale):e.width&&(n=e.width*n/o,o=e.width)),t.width=o,t.height=n;const r=o/a.viewport.width,c=n/a.viewport.height,p=l.deg,d=l.x,h=l.y;function u(e,t,i){l.deg=e,l.x=t,l.y=i,l.image.style.transform=s()}0!==p&&u.call(this,0,l.ox,l.oy);const g=l.image.getBoundingClientRect(),w=l.viewport.getBoundingClientRect(),m=r*(g.x-w.x-l.viewport.border),v=c*(g.y-w.y-l.viewport.border);if(0!==p&&(i.translate((d-l.x)*r,(h-l.y)*c),i.translate(o/2,n/2),i.rotate(p*Math.PI/180),i.translate(-o/2,-n/2)),i.drawImage(l.image,m,v,g.width*r,g.height*c),\"circle\"===a.viewport.type){i.translate(o/2,n/2),i.rotate(-p*Math.PI/180),i.translate(-o/2,-n/2),i.scale(1,a.viewport.height/a.viewport.width);let e=(a.viewport.width-a.viewport.height)/2*r,t=(l.x-d)*r,s=(l.y-h)*c;e>0?s=e+2*s:e<0&&(s=e+s/2),i.translate(t,s),i.globalCompositeOperation=\"destination-in\",i.arc(o/2,n/2,o/2,0,2*Math.PI),i.fill()}return\"triangle\"===a.viewport.type&&(i.translate(o/2,n/2),i.rotate(-p*Math.PI/180),i.translate(-o/2,-n/2),i.translate((l.x-d)*r,(l.y-h)*c),i.beginPath(),i.globalCompositeOperation=\"destination-in\",i.moveTo(o/2,0),i.lineTo(o,n),i.lineTo(0,n),i.closePath(),i.fill()),u.call(this,p,d,h),t}.call(this,e);return e=\"object\"==typeof e?e.type:e,new Promise(i=>{\"blob\"===e?t.toBlob(e=>i(URL.createObjectURL(e))):i(t.toDataURL())})}position(){return{x:l.x,y:l.y,scale:l.scale,deg:parseInt(l.deg)}}destroy(){l.wrapper.innerHTML=\"\",l.wrapper.className=l.wrapper.className.replace(\"cropme-wrapper\",\"\"),delete this.properties}}const d={container:{width:300,height:300},viewport:{width:100,height:100}};\"object\"==typeof e.exports?e.exports=p:(n=[],void 0===(r=\"function\"==typeof(o=p)?o.apply(t,n):o)||(e.exports=r))}(window)}]);","extractedComments":[]}