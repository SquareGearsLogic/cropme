{"code":"!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=0)}([function(e,t,r){\"use strict\";r.r(t),function(e){r(2);!function(t){const n=r(3);var i,o;function a(){return\"translate(\"+o.x+\"px,\"+o.y+\"px) scale(\"+o.scale+\") rotate(\"+o.deg+\"deg)\"}function c(){(function(){const e=document.createElement(\"div\");e.classList.add(\"cropme-container\"),e.style.width=i.container.width+\"px\",e.style.height=i.container.height+\"px\",o.container=e,o.wrapper.appendChild(e)}).call(this),function(){const e=document.createElement(\"div\");e.classList.add(\"cropme-slider\");const t=o.slider=document.createElement(\"input\");t.type=\"range\",t.setAttribute(\"min\",.01),t.setAttribute(\"max\",1.5),t.setAttribute(\"step\",1e-6),t.style.width=i.container.width+\"px\",e.appendChild(t),o.wrapper.appendChild(e)}.call(this),function(){const e=o.image=document.createElement(\"img\");e.ondragstart=(()=>!1),o.container.appendChild(e)}.call(this),function(){const e=o.viewport=document.createElement(\"div\");i.viewport.width=i.viewport.width>i.container.width?i.container.width:i.viewport.width,i.viewport.height=i.viewport.height>i.container.height?i.container.height:i.viewport.height,e.style.width=i.viewport.width+\"px\",e.style.height=i.viewport.height+\"px\",e.className=\"viewport\",\"circle\"===i.viewport.type&&(e.className=\"viewport circle\");let t=0;if(i.viewport.border){let e=(i.container.width-i.viewport.width)/2;t=e<o.viewport.clientLeft?e:o.viewport.clientLeft}o.viewport.style.borderWidth=t+\"px\",o.viewport.border=t,o.container.appendChild(e)}.call(this);let e,t,r=0,n=0;function c(e){if(e.touches){let t=e.touches[0];e.pageX=t.pageX,e.pageY=t.pageY}return e}let s=function(i){i.preventDefault(),i=c(i),r=o.x||r,n=o.y||n,e=i.pageX-r,t=i.pageY-n,document.addEventListener(\"mousemove\",l),document.addEventListener(\"touchmove\",l)};o.image.addEventListener(\"mousedown\",s),o.image.addEventListener(\"touchstart\",s);let l=function(r){if(r.preventDefault(),(r=c(r)).touches&&r.touches.length>1){let e=r.touches[1],t=r.touches[0],n=t.pageX-e.pageX,i=t.pageY-e.pageY,a=90-180*Math.atan(n/i)/Math.PI;o.odeg||(o.odeg=a-o.deg),o.deg=a-o.odeg;let c=Math.sqrt(Math.pow(n,2)+Math.pow(i,2));o.od||(o.od=c/o.scale),o.scale=o.slider.value=c/o.od}o.x=r.pageX-e,o.y=r.pageY-t,o.image.style.transform=a()},p=function(){document.removeEventListener(\"touchmove\",l),document.removeEventListener(\"mousemove\",l),o.od=0,o.odeg=0};document.addEventListener(\"mouseup\",p),document.addEventListener(\"touchend\",p),o.slider.addEventListener(\"input\",function(e){o.scale=parseFloat(e.target.value),o.image.style.transform=a()});o.container.addEventListener(\"mousewheel\",function(e){e.preventDefault(),o.scale=o.slider.value=o.scale+e.wheelDelta/1200*o.scale,o.image.style.transform=a()})}window.jQuery&&(jQuery.fn.cropme=function(e,t){if(\"object\"==typeof e)return this.each(function(){var t=new s(this,e);$(this).data(\"cropme\",t)});if(\"string\"==typeof e){let r=this.data(\"cropme\");if(\"position\"===e)return r.position();if(\"bind\"===e)return r.bind(t);if(\"export\"===e)return r.export(t);if(\"rotate\"===e)return r.rotate(t);if(\"destroy\"===e)return r.destroy();throw\"Error: \"+e+\" method not found\"}throw\"Error: the argument must be an object or a string\"});class s{constructor(e,t){if(e.className.indexOf(\"cropme-wrapper\")>-1)throw\"Error: Cropme is already initialized\";e.classList.add(\"cropme-wrapper\"),this.properties={},(o=this.properties).wrapper=e,i=o.options=n(l,t),c.call(this)}bind(e){o.image.src=e.url,o.image.onload=function(){let t=o.image.getBoundingClientRect(),r=o.container.getBoundingClientRect(),n=(r.width-t.width)/2,i=(r.height-t.height)/2;o.ox=n,o.oy=i,\"object\"==typeof e.position&&(n=e.position.x||n,i=e.position.y||i);let c=e.scale?e.scale:r.height/t.height;o.x=n,o.y=i,o.scale=c,o.slider.value=c,o.deg=e.deg||0,o.image.style.transform=a(),o.image.style.opacity=1}}rotate(e){o.deg=e,o.image.style.transform=a()}export(e){let t=function(e){let t=document.createElement(\"canvas\"),r=t.getContext(\"2d\"),n=i.viewport.width,c=i.viewport.height;\"object\"==typeof e&&(e.scale?(n*=e.scale,c*=e.scale):e.width&&(c=e.width*c/n,n=e.width)),t.width=n,t.height=c;const s=n/i.viewport.width,l=c/i.viewport.height,p=o.deg,d=o.x,u=o.y;function f(e,t,r){o.deg=e,o.x=t,o.y=r,o.image.style.transform=a()}0!==p&&f.call(this,0,o.ox,o.oy);const h=o.image.getBoundingClientRect(),g=o.viewport.getBoundingClientRect(),m=s*(h.x-g.x-o.viewport.border),y=l*(h.y-g.y-o.viewport.border);if(0!==p&&(r.translate((d-o.x)*s,(u-o.y)*l),r.translate(n/2,c/2),r.rotate(p*Math.PI/180),r.translate(-n/2,-c/2)),r.drawImage(o.image,m,y,h.width*s,h.height*l),\"circle\"===i.viewport.type){r.translate(n/2,c/2),r.rotate(-p*Math.PI/180),r.translate(-n/2,-c/2),r.scale(1,i.viewport.height/i.viewport.width);let e=(i.viewport.width-i.viewport.height)/2*s,t=(o.x-d)*s,a=(o.y-u)*l;e>0?a=e+2*a:e<0&&(a=e+a/2),r.translate(t,a),r.globalCompositeOperation=\"destination-in\",r.arc(n/2,c/2,n/2,0,2*Math.PI),r.fill()}return\"triangle\"===i.viewport.type&&(r.translate(n/2,c/2),r.rotate(-p*Math.PI/180),r.translate(-n/2,-c/2),r.translate((o.x-d)*s,(o.y-u)*l),r.beginPath(),r.globalCompositeOperation=\"destination-in\",r.moveTo(n/2,0),r.lineTo(n,c),r.lineTo(0,c),r.closePath(),r.fill()),f.call(this,p,d,u),t}.call(this,e);return e=\"object\"==typeof e?e.type:e,new Promise(r=>{\"blob\"===e?t.toBlob(e=>r(URL.createObjectURL(e))):r(t.toDataURL())})}position(){return{x:o.x,y:o.y,scale:o.scale,deg:parseInt(o.deg)}}destroy(){o.wrapper.innerHTML=\"\",o.wrapper.className=o.wrapper.className.replace(\"cropme-wrapper\",\"\"),delete this.properties}}const l={container:{width:300,height:300},viewport:{width:100,height:100}};\"object\"==typeof e.exports?e.exports=s:\"function\"==typeof define&&r(4)?define([],function(){return s}):t.Cropme=s}(window)}.call(this,r(1)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,\"loaded\",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,\"id\",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,\"exports\",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,r){},function(e,t,r){e.exports=function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p=\"\",t(0)}([function(e,t,r){\"use strict\";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function e(t){for(var r=arguments.length,a=Array(r>1?r-1:0),c=1;c<r;c++)a[c-1]=arguments[c];if(!a.length)return t;var s=a.shift();if((0,i.isObject)(t)&&(0,i.isObject)(s))for(var l in s)(0,i.isObject)(s[l])?(t[l]||Object.assign(t,n({},l,{})),e(t[l],s[l])):(0,o.isArray)(s[l])?(t[l]||Object.assign(t,n({},l,[])),t[l]=t[l].concat(s[l])):Object.assign(t,n({},l,s[l]));return e.apply(void 0,[t].concat(a))};var i=r(1),o=r(2);e.exports=t.default},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e};t.isObject=function(e){return e&&\"object\"===(void 0===e?\"undefined\":r(e))&&!Array.isArray(e)}},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.isArray=function(e){return e&&Array.isArray(e)}}])},function(e,t){(function(t){e.exports=t}).call(this,{})}]);","extractedComments":[]}