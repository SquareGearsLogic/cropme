{"code":"!function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=0)}([function(e,t,r){\"use strict\";r.r(t),function(e){r(2);!function(t){const o=r(3);var n,i;function a(){return\"translate(\"+i.x+\"px,\"+i.y+\"px) scale(\"+i.scale+\") rotate(\"+i.deg+\"deg)\"}function c(){return function(){const e=document.createElement(\"div\");e.classList.add(\"cropme-container\"),e.style.width=n.container.width+\"px\",e.style.height=n.container.height+\"px\",i.container=e,i.wrapper.appendChild(e)}.call(this),void console.log(i)}window.jQuery&&(jQuery.fn.cropme=function(e,t){if(\"object\"==typeof e)return this.each(function(){var t=new l(this,e);$(this).data(\"cropme\",t)});if(\"string\"==typeof e){let r=this.data(\"cropme\");if(\"position\"===e)return r.position();if(\"bind\"===e)return r.bind(t);if(\"export\"===e)return r.export(t);if(\"rotate\"===e)return r.rotate(t);if(\"destroy\"===e)return r.destroy();throw\"Error: \"+e+\" method not found\"}throw\"Error: the argument must be an object or a string\"});class l{constructor(e,t){if(e.className.indexOf(\"cropme-wrapper\")>-1)throw\"Error: Cropme is already initialized\";this.properties={},i=this.properties,n=i.options=o(s,t),i.wrapper=e,\"img\"===e.tagName.toLowerCase()&&(i.image=e,i.wrapper=document.createElement(\"div\"),e.parentNode.insertBefore(i.wrapper,e.previousSibling)),i.wrapper.classList.add(\"cropme-wrapper\"),c.call(this),i.image.src&&this.bind({url:i.image.src})}bind(e){i.image.src=e.url,i.image.onload=function(){let t=i.image.getBoundingClientRect(),r=i.container.getBoundingClientRect(),o=(r.width-t.width)/2,c=(r.height-t.height)/2;i.ox=o,i.oy=c,\"object\"==typeof e.position&&(o=e.position.x||o,c=e.position.y||c);let l=e.scale?e.scale:r.height/t.height;l<n.zoom.min&&(l=n.zoom.min),l>n.zoom.max&&(l=n.zoom.max),i.x=o,i.y=c,i.scale=l,i.slider.value=l,i.deg=e.deg||0,i.image.style.transform=a(),i.image.style.opacity=1}}rotate(e){i.deg=e,i.image.style.transform=a()}export(e){let t=function(e){let t=document.createElement(\"canvas\"),r=t.getContext(\"2d\"),o=n.viewport.width,c=n.viewport.height;\"object\"==typeof e&&(e.scale?(o*=e.scale,c*=e.scale):e.width&&(c=e.width*c/o,o=e.width)),t.width=o,t.height=c;const l=o/n.viewport.width,s=c/n.viewport.height,p=i.deg,u=i.x,f=i.y;function d(e,t,r){i.deg=e,i.x=t,i.y=r,i.image.style.transform=a()}0!==p&&d.call(this,0,i.ox,i.oy);const y=i.image.getBoundingClientRect(),h=i.viewport.getBoundingClientRect(),m=l*(y.x-h.x-i.viewport.border),g=s*(y.y-h.y-i.viewport.border);if(0!==p&&(r.translate((u-i.x)*l,(f-i.y)*s),r.translate(o/2,c/2),r.rotate(p*Math.PI/180),r.translate(-o/2,-c/2)),r.drawImage(i.image,m,g,y.width*l,y.height*s),\"circle\"===n.viewport.type){r.translate(o/2,c/2),r.rotate(-p*Math.PI/180),r.translate(-o/2,-c/2),r.scale(1,n.viewport.height/n.viewport.width);let e=(n.viewport.width-n.viewport.height)/2*l,t=(i.x-u)*l,a=(i.y-f)*s;e>0?a=e+2*a:e<0&&(a=e+a/2),r.translate(t,a),r.globalCompositeOperation=\"destination-in\",r.arc(o/2,c/2,o/2,0,2*Math.PI),r.fill()}return\"triangle\"===n.viewport.type&&(r.translate(o/2,c/2),r.rotate(-p*Math.PI/180),r.translate(-o/2,-c/2),r.translate((i.x-u)*l,(i.y-f)*s),r.beginPath(),r.globalCompositeOperation=\"destination-in\",r.moveTo(o/2,0),r.lineTo(o,c),r.lineTo(0,c),r.closePath(),r.fill()),d.call(this,p,u,f),t}.call(this,e);return e=\"object\"==typeof e?e.type:e,new Promise(r=>{\"blob\"===e?t.toBlob(e=>r(URL.createObjectURL(e))):r(t.toDataURL())})}position(){return{x:i.x,y:i.y,scale:i.scale,deg:parseInt(i.deg)}}destroy(){i.wrapper.innerHTML=\"\",i.wrapper.className=i.wrapper.className.replace(\"cropme-wrapper\",\"\"),delete this.properties}}const s={container:{width:300,height:300},viewport:{width:100,height:100},zoom:{min:.01,max:3}};\"object\"==typeof e.exports?e.exports=l:\"function\"==typeof define&&r(4)?define([],function(){return l}):t.Cropme=l}(window)}.call(this,r(1)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,\"loaded\",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,\"id\",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,\"exports\",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,r){},function(e,t,r){e.exports=function(e){function t(o){if(r[o])return r[o].exports;var n=r[o]={exports:{},id:o,loaded:!1};return e[o].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};return t.m=e,t.c=r,t.p=\"\",t(0)}([function(e,t,r){\"use strict\";function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function e(t){for(var r=arguments.length,a=Array(r>1?r-1:0),c=1;c<r;c++)a[c-1]=arguments[c];if(!a.length)return t;var l=a.shift();if((0,n.isObject)(t)&&(0,n.isObject)(l))for(var s in l)(0,n.isObject)(l[s])?(t[s]||Object.assign(t,o({},s,{})),e(t[s],l[s])):(0,i.isArray)(l[s])?(t[s]||Object.assign(t,o({},s,[])),t[s]=t[s].concat(l[s])):Object.assign(t,o({},s,l[s]));return e.apply(void 0,[t].concat(a))};var n=r(1),i=r(2);e.exports=t.default},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e};t.isObject=function(e){return e&&\"object\"===(void 0===e?\"undefined\":r(e))&&!Array.isArray(e)}},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.isArray=function(e){return e&&Array.isArray(e)}}])},function(e,t){(function(t){e.exports=t}).call(this,{})}]);","extractedComments":[]}