{"code":"!function(e){var t={};function i(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)i.d(r,o,function(t){return e[t]}.bind(null,o));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,\"a\",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p=\"\",i(i.s=0)}([function(e,t,i){var r,o,n;!function(i){var a,s;function c(){return\"translate(\"+s.x+\"px,\"+s.y+\"px) scale(\"+s.scale+\") rotate(\"+s.deg+\"deg)\"}function l(){(function(){const e=document.createElement(\"div\");e.classList.add(\"cropme-container\"),e.style.width=a.container.width+\"px\",e.style.height=a.container.height+\"px\",s.container=e,s.wrapper.appendChild(e)}).call(this),function(){const e=document.createElement(\"div\");e.classList.add(\"cropme-slider\");const t=s.slider=document.createElement(\"input\");t.type=\"range\",t.setAttribute(\"min\",.01),t.setAttribute(\"max\",1.5),t.setAttribute(\"step\",1e-6),t.style.width=a.container.width+\"px\",e.appendChild(t),s.wrapper.appendChild(e)}.call(this),function(){const e=s.image=document.createElement(\"img\");e.ondragstart=(()=>!1),s.container.appendChild(e)}.call(this),function(){const e=s.viewport=document.createElement(\"div\");a.viewport.width=a.viewport.width>a.container.width?a.container.width:a.viewport.width,a.viewport.height=a.viewport.height>a.container.height?a.container.height:a.viewport.height,e.style.width=a.viewport.width+\"px\",e.style.height=a.viewport.height+\"px\",e.className=\"viewport\",\"circle\"===a.viewport.type&&(e.className=\"viewport circle\");let t=0;if(a.viewport.border){let e=(a.container.width-a.viewport.width)/2;t=e<s.viewport.clientLeft?e:s.viewport.clientLeft}s.viewport.style.borderWidth=t+\"px\",s.viewport.border=t,s.container.appendChild(e)}.call(this);let e,t,i=0,r=0;function o(e){if(e.touches){let t=e.touches[0];e.pageX=t.pageX,e.pageY=t.pageY}return e}let n=function(n){n.preventDefault(),n=o(n),i=s.x||i,r=s.y||r,e=n.pageX-i,t=n.pageY-r,document.addEventListener(\"mousemove\",l),document.addEventListener(\"touchmove\",l)};s.image.addEventListener(\"mousedown\",n),s.image.addEventListener(\"touchstart\",n);let l=function(i){if(i.preventDefault(),(i=o(i)).touches&&i.touches.length>1){let e=i.touches[1],t=i.touches[0],r=t.pageX-e.pageX,o=t.pageY-e.pageY,n=90-180*Math.atan(r/o)/Math.PI;s.odeg||(s.odeg=n-s.deg),s.deg=n-s.odeg;let a=Math.sqrt(Math.pow(r,2)+Math.pow(o,2));s.od||(s.od=a/s.scale),s.scale=s.slider.value=a/s.od}s.x=i.pageX-e,s.y=i.pageY-t,s.image.style.transform=c()},p=function(){document.removeEventListener(\"touchmove\",l),document.removeEventListener(\"mousemove\",l),s.od=0,s.odeg=0};document.addEventListener(\"mouseup\",p),document.addEventListener(\"touchend\",p),s.slider.addEventListener(\"input\",function(e){s.scale=parseFloat(e.target.value),s.image.style.transform=c()});s.container.addEventListener(\"mousewheel\",function(e){e.preventDefault(),s.scale=s.slider.value=s.scale+e.wheelDelta/1200*s.scale,s.image.style.transform=c()})}window.jQuery&&(jQuery.fn.cropme=function(e,t){if(\"object\"==typeof e)return this.each(function(){var t=new p(this,e);$(this).data(\"cropme\",t)});if(\"string\"==typeof e){let i=this.data(\"cropme\");if(\"position\"===e)return i.position();if(\"bind\"===e)return i.bind(t);if(\"export\"===e)return i.export(t);if(\"rotate\"===e)return i.rotate(t);if(\"destroy\"===e)return i.destroy();throw\"Error: \"+e+\" method not found\"}throw\"Error: the argument must be an object or a string\"});class p{constructor(e,t){if(e.className.indexOf(\"cropme-wrapper\")>-1)throw\"Error: Cropme is already initialized\";e.classList.add(\"cropme-wrapper\"),this.properties={},(s=this.properties).wrapper=e,a=s.options=nestedObjectAssign(d,t),l.call(this)}bind(e){s.image.src=e.url,s.image.onload=function(){let t=s.image.getBoundingClientRect(),i=s.container.getBoundingClientRect(),r=(i.width-t.width)/2,o=(i.height-t.height)/2;s.ox=r,s.oy=o,\"object\"==typeof e.position&&(r=e.position.x||r,o=e.position.y||o);let n=e.scale?e.scale:i.height/t.height;s.x=r,s.y=o,s.scale=n,s.slider.value=n,s.deg=e.deg||0,s.image.style.transform=c(),s.image.style.opacity=1}}rotate(e){s.deg=e,s.image.style.transform=c()}export(e){let t=function(e){let t=document.createElement(\"canvas\"),i=t.getContext(\"2d\"),r=a.viewport.width,o=a.viewport.height;\"object\"==typeof e&&(e.scale?(r*=e.scale,o*=e.scale):e.width&&(o=e.width*o/r,r=e.width)),t.width=r,t.height=o;const n=r/a.viewport.width,l=o/a.viewport.height,p=s.deg,d=s.x,h=s.y;function u(e,t,i){s.deg=e,s.x=t,s.y=i,s.image.style.transform=c()}0!==p&&u.call(this,0,s.ox,s.oy);const g=s.image.getBoundingClientRect(),w=s.viewport.getBoundingClientRect(),m=n*(g.x-w.x-s.viewport.border),f=l*(g.y-w.y-s.viewport.border);if(0!==p&&(i.translate((d-s.x)*n,(h-s.y)*l),i.translate(r/2,o/2),i.rotate(p*Math.PI/180),i.translate(-r/2,-o/2)),i.drawImage(s.image,m,f,g.width*n,g.height*l),\"circle\"===a.viewport.type){i.translate(r/2,o/2),i.rotate(-p*Math.PI/180),i.translate(-r/2,-o/2),i.scale(1,a.viewport.height/a.viewport.width);let e=(a.viewport.width-a.viewport.height)/2*n,t=(s.x-d)*n,c=(s.y-h)*l;e>0?c=e+2*c:e<0&&(c=e+c/2),i.translate(t,c),i.globalCompositeOperation=\"destination-in\",i.arc(r/2,o/2,r/2,0,2*Math.PI),i.fill()}return\"triangle\"===a.viewport.type&&(i.translate(r/2,o/2),i.rotate(-p*Math.PI/180),i.translate(-r/2,-o/2),i.translate((s.x-d)*n,(s.y-h)*l),i.beginPath(),i.globalCompositeOperation=\"destination-in\",i.moveTo(r/2,0),i.lineTo(r,o),i.lineTo(0,o),i.closePath(),i.fill()),u.call(this,p,d,h),t}.call(this,e);return e=\"object\"==typeof e?e.type:e,new Promise(i=>{\"blob\"===e?t.toBlob(e=>i(URL.createObjectURL(e))):i(t.toDataURL())})}position(){return{x:s.x,y:s.y,scale:s.scale,deg:parseInt(s.deg)}}destroy(){s.wrapper.innerHTML=\"\",s.wrapper.className=s.wrapper.className.replace(\"cropme-wrapper\",\"\"),delete this.properties}}const d={container:{width:300,height:300},viewport:{width:100,height:100}};\"object\"==typeof e.exports?e.exports=p:(o=[],void 0===(n=\"function\"==typeof(r=p)?r.apply(t,o):r)||(e.exports=n))}(window)}]);","extractedComments":[]}