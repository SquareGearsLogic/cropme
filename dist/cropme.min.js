!function(e, t) {
    "object" == typeof exports && "object" == typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define([], t) : "object" == typeof exports ? exports.Cropme = t() : e.Cropme = t();
}(window, function() {
    return function(i) {
        var r = {};
        function o(e) {
            if (r[e]) return r[e].exports;
            var t = r[e] = {
                i: e,
                l: !1,
                exports: {}
            };
            return i[e].call(t.exports, t, t.exports, o), t.l = !0, t.exports;
        }
        return o.m = i, o.c = r, o.d = function(e, t, i) {
            o.o(e, t) || Object.defineProperty(e, t, {
                enumerable: !0,
                get: i
            });
        }, o.r = function(e) {
            "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {
                value: "Module"
            }), Object.defineProperty(e, "__esModule", {
                value: !0
            });
        }, o.t = function(t, e) {
            if (1 & e && (t = o(t)), 8 & e) return t;
            if (4 & e && "object" == typeof t && t && t.__esModule) return t;
            var i = Object.create(null);
            if (o.r(i), Object.defineProperty(i, "default", {
                enumerable: !0,
                value: t
            }), 2 & e && "string" != typeof t) for (var r in t) o.d(i, r, function(e) {
                return t[e];
            }.bind(null, r));
            return i;
        }, o.n = function(e) {
            var t = e && e.__esModule ? function() {
                return e.default;
            } : function() {
                return e;
            };
            return o.d(t, "a", t), t;
        }, o.o = function(e, t) {
            return Object.prototype.hasOwnProperty.call(e, t);
        }, o.p = "", o(o.s = 0);
    }([ function(e, t, i) {
        "use strict";
        i(1);
        var r = i(2);
        e.exports = r;
    }, function(e, t, i) {}, function(e, t, i) {
        "use strict";
        var r = function() {
            function r(e, t) {
                for (var i = 0; i < t.length; i++) {
                    var r = t[i];
                    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
                    Object.defineProperty(e, r.key, r);
                }
            }
            return function(e, t, i) {
                return t && r(e.prototype, t), i && r(e, i), e;
            };
        }(), y = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
            return typeof e;
        } : function(e) {
            return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
        };
        var o = i(3);
        function w() {
            return "translate(" + this.properties.x + "px," + this.properties.y + "px) scale(" + this.properties.scale + ") rotate(" + this.properties.deg + "deg)";
        }
        function n() {
            if (this.properties.rotation_slider) this.options.rotation.slider ? this.properties.rotation_slider.disabled = !this.options.rotation.enable : (this.properties.wrapper.removeChild(this.properties.rotation_slider.parentNode), 
            delete this.properties.rotation_slider); else if (this.options.rotation.slider) {
                var e = document.createElement("div");
                e.classList.add("cropme-rotation-slider");
                var t = this.properties.rotation_slider = document.createElement("input");
                t.type = "range", t.setAttribute("min", -180), t.setAttribute("max", 180), t.setAttribute("step", 1), 
                t.value = 0, t.style.width = this.options.container.width + "px", e.appendChild(t), 
                this.properties.wrapper.appendChild(e);
                var i = this;
                this.properties.rotation_slider.addEventListener("input", function(e) {
                    i.rotate(e.target.value);
                }), this.properties.rotation_slider.disabled = !this.options.rotation.enable;
            }
        }
        function h() {
            function e() {
                var e = this.options.container.width / 2 + 12;
                "left" === this.options.rotation.position && (e = -this.options.container.width / 2 - 20);
                var t = this.options.container.height / 2 + 12;
                this.properties.sliderContainer.style.transform = "translate(" + e + "px, " + t + "px) rotate(-90deg)", 
                this.properties.sliderContainer.style.marginTop = "-24px", this.properties.slider.disabled = !this.options.zoom.enable;
            }
            if (this.properties.slider) this.options.zoom.slider ? e.call(this) : (this.properties.wrapper.removeChild(this.properties.slider.parentNode), 
            delete this.properties.slider); else if (this.options.zoom.slider) {
                var t = this, i = this.properties.sliderContainer = document.createElement("div");
                i.classList.add("cropme-slider");
                var r = this.properties.slider = document.createElement("input");
                r.type = "range", r.setAttribute("min", this.options.zoom.min), r.setAttribute("max", this.options.zoom.max), 
                r.setAttribute("step", 1e-6), r.style.width = this.options.container.width + "px", 
                i.appendChild(r), this.properties.wrapper.insertBefore(i, this.properties.wrapper.firstChild), 
                this.properties.slider.value = this.properties.scale, this.properties.slider.addEventListener("input", function(e) {
                    t.properties.scale = parseFloat(e.target.value), t.properties.image.style.transform = w.call(t);
                }), e.call(this);
            }
        }
        function d() {
            var e = this.properties.container;
            e || (e = this.properties.container = document.createElement("div"), this.properties.wrapper.appendChild(e)), 
            e.classList.add("cropme-container"), e.style.width = this.options.container.width + "px", 
            e.style.height = this.options.container.height + "px";
        }
        function u() {
            var e = this.properties.viewport = this.properties.viewport || document.createElement("div"), t = this.options;
            if (t.viewport.width = t.viewport.width > t.container.width ? t.container.width : t.viewport.width, 
            t.viewport.height = t.viewport.height > t.container.height ? t.container.height : t.viewport.height, 
            e.style.width = t.viewport.width + "px", e.style.height = t.viewport.height + "px", 
            e.className = "viewport", "circle" === t.viewport.type && (e.className = "viewport circle"), 
            t.viewport.border.enable) {
                var i = (t.container.width - t.viewport.width) / 2;
                t.viewport.border.width = i < t.viewport.border.width ? i : t.viewport.border.width;
            } else t.viewport.border.width = 0;
            this.properties.viewport.style.borderWidth = t.viewport.border.width + "px", this.properties.viewport.style.borderColor = t.viewport.border.color, 
            this.properties.container.appendChild(e);
        }
        function s() {
            d.call(this), n.call(this), h.call(this), function() {
                this.properties.image || (this.properties.image = new Image()), this.properties.image.ondragstart = function() {
                    return !1;
                }, this.properties.container.appendChild(this.properties.image);
            }.call(this), u.call(this);
            var a = void 0, l = void 0, r = 0, o = 0, c = this, e = function(e) {
                e.preventDefault();
                var t = e.pageX, i = e.pageY;
                e.touches && (t = e.touches[0].pageX, i = e.touches[0].pageY), r = c.properties.x || r, 
                o = c.properties.y || o, a = t - r, l = i - o, document.addEventListener("mousemove", p), 
                document.addEventListener("touchmove", p), document.addEventListener("mouseup", s), 
                document.addEventListener("touchend", s);
            };
            c.properties.image.addEventListener("mousedown", e), c.properties.image.addEventListener("touchstart", e);
            var p = function(e) {
                e.preventDefault();
                var t = e.pageX, i = e.pageY;
                if (e.touches && (t = e.touches[0].pageX, i = e.touches[0].pageY), e.touches && 1 < e.touches.length) {
                    var r = e.touches[1], o = t - r.pageX, s = i - r.pageY;
                    if (c.options.rotation.enable) {
                        var n = 90 - 180 * Math.atan2(o, s) / Math.PI;
                        c.properties.odeg || (c.properties.odeg = n - c.properties.deg), c.properties.deg = n - c.properties.odeg;
                    }
                    if (c.options.zoom.enable) {
                        var p = Math.sqrt(Math.pow(o, 2) + Math.pow(s, 2));
                        c.properties.od || (c.properties.od = p / c.properties.scale), c.properties.scale = c.properties.slider.value = p / c.properties.od;
                    }
                } else c.properties.x = t - a, c.properties.y = i - l;
                c.properties.image.style.transform = w.call(c);
            }, s = function e() {
                document.removeEventListener("touchmove", p), document.removeEventListener("mousemove", p), 
                document.removeEventListener("mouseup", e), document.removeEventListener("touchend", e), 
                c.properties.od = 0, c.properties.odeg = 0;
                var t = c.properties.scale, i = c.properties.image.getBoundingClientRect(), r = c.properties.viewport.getBoundingClientRect(), o = r.top - i.top + r.height / 2, s = r.left - i.left + r.width / 2, n = c.properties.image.style.transformOrigin.split("px ");
                parseInt(n[0]), parseInt(n[1]), parseInt(c.properties.deg), Math.PI;
            };
            c.properties.container.addEventListener("mousewheel", function(e) {
                e.preventDefault();
                var t = c.properties.scale + e.wheelDelta / 1200 * c.properties.scale;
                t > c.options.zoom.min && t < c.options.zoom.max && c.options.zoom.mouseWheel && c.options.zoom.enable && (c.options.zoom.slider && (c.properties.slider.value = t), 
                c.properties.scale = t, c.properties.image.style.transform = w.call(c));
            });
        }
        window.jQuery && (jQuery.fn.cropme = function(t, e) {
            if ("object" === (void 0 === t ? "undefined" : y(t))) return this.each(function() {
                var e = new p(this, t);
                $(this).data("cropme", e);
            });
            if ("string" != typeof t) throw "Error: the argument must be an object or a string";
            var i = this.data("cropme");
            switch (t) {
              case "position":
                return i.position();

              case "bind":
                return i.bind(e);

              case "crop":
                return i.crop(e);

              case "rotate":
                return i.rotate(e);

              case "reload":
                return i.reload(e);

              case "destroy":
                return i.destroy();

              default:
                throw "Error: " + t + " method not found";
            }
        });
        var p = function() {
            function i(e, t) {
                if (function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
                }(this, i), -1 < e.className.indexOf("cropme-wrapper")) throw "Error: Cropme is already initialized";
                this.properties = {}, this.options = o(a, t), "img" === (this.properties.wrapper = e).tagName.toLowerCase() && (this.properties.image = new Image(), 
                this.properties.image.src = e.src, this.properties.wrapper = document.createElement("div"), 
                e.parentNode.insertBefore(this.properties.wrapper, e.previousSibling), e.parentNode.removeChild(e)), 
                this.properties.wrapper.className += " cropme-wrapper " + this.options.customClass, 
                s.call(this), this.properties.image.src && this.bind({
                    url: this.properties.image.src
                });
            }
            return r(i, [ {
                key: "bind",
                value: function(p) {
                    var e = this;
                    this.properties.image.src = p.url;
                    var a = this.properties, l = this.options, c = this;
                    return new Promise(function(n) {
                        e.properties.image.onload = function() {
                            var e = a.image.getBoundingClientRect(), t = a.container.getBoundingClientRect(), i = (t.width - e.width) / 2, r = (t.height - e.height) / 2, o = t.height / e.height, s = 0;
                            if (a.ox = i, a.oy = r, "object" === y(p.position) && (i += p.position.x || 0, r += p.position.y || 0, 
                            o = p.position.scale || o, s = p.position.angle || s), l.zoom.max <= l.zoom.min) throw "Error: max zoom cannot be less or equal to min zoom";
                            o < l.zoom.min && (o = l.zoom.min), o > l.zoom.max && (o = l.zoom.max), a.x = i, 
                            a.y = r, a.origin_x = e.width / 2, a.origin_y = e.height / 2, a.scale = o, c.options.zoom.slider && (a.slider.value = o), 
                            a.deg = s, a.image.style.transform = w.call(c), a.image.style.transformOrigin = function(e, t) {
                                return e + "px " + t + "px";
                            }.call(c, a.origin_x, a.origin_y), a.image.style.opacity = 1, n(c.properties.image);
                        };
                    });
                }
            }, {
                key: "rotate",
                value: function(e) {
                    this.properties.deg = e;
                    var t = this.properties.image.style.transformOrigin.split("px "), i = parseInt(t[0]), r = parseInt(t[1]);
                    this.properties.rotate_originx = i, this.properties.rotate_originy = r, this.properties.image.style.transform = w.call(this);
                }
            }, {
                key: "crop",
                value: function(e) {
                    var i = function(e) {
                        var t = document.createElement("canvas"), i = t.getContext("2d"), r = this.options.viewport.width, o = this.options.viewport.height;
                        "object" === (void 0 === e ? "undefined" : y(e)) && (e.scale ? (r *= e.scale, o *= e.scale) : e.width && (o = e.width * o / r, 
                        r = e.width)), t.width = r, t.height = o;
                        var s = r / this.options.viewport.width, n = o / this.options.viewport.height, p = this.properties.deg, a = this.properties.x, l = this.properties.y;
                        function c(e, t, i) {
                            this.properties.deg = e, this.properties.x = t, this.properties.y = i, this.properties.image.style.transform = w.call(this);
                        }
                        0 !== p && c.call(this, 0, this.properties.ox, this.properties.oy);
                        var h = this.properties.image.getBoundingClientRect(), d = this.properties.viewport.getBoundingClientRect(), u = s * (h.x - d.x - this.options.viewport.border.width), m = n * (h.y - d.y - this.options.viewport.border.width);
                        if (0 !== p && (i.translate((a - this.properties.x) * s, (l - this.properties.y) * n), 
                        i.translate(r / 2, o / 2), i.rotate(p * Math.PI / 180), i.translate(-r / 2, -o / 2)), 
                        i.drawImage(this.properties.image, u, m, h.width * s, h.height * n), "circle" === this.options.viewport.type) {
                            i.translate(r / 2, o / 2), i.rotate(-p * Math.PI / 180), i.translate(-r / 2, -o / 2), 
                            i.scale(1, this.options.viewport.height / this.options.viewport.width);
                            var f = (this.options.viewport.width - this.options.viewport.height) / 2 * s, v = (this.properties.x - a) * s, g = (this.properties.y - l) * n;
                            0 < f ? g = f + 2 * g : f < 0 && (g = f + g / 2), i.translate(v, g), i.globalCompositeOperation = "destination-in", 
                            i.arc(r / 2, o / 2, r / 2, 0, 2 * Math.PI), i.fill();
                        }
                        return "triangle" === this.options.viewport.type && (i.translate(r / 2, o / 2), 
                        i.rotate(-p * Math.PI / 180), i.translate(-r / 2, -o / 2), i.translate((this.properties.x - a) * s, (this.properties.y - l) * n), 
                        i.beginPath(), i.globalCompositeOperation = "destination-in", i.moveTo(r / 2, 0), 
                        i.lineTo(r, o), i.lineTo(0, o), i.closePath(), i.fill()), c.call(this, p, a, l), 
                        t;
                    }.call(this, e);
                    return e = "object" === (void 0 === e ? "undefined" : y(e)) ? e.type : e, new Promise(function(t) {
                        "blob" === e ? i.toBlob(function(e) {
                            return t(URL.createObjectURL(e));
                        }) : t(i.toDataURL());
                    });
                }
            }, {
                key: "position",
                value: function() {
                    return {
                        x: this.properties.x - this.properties.ox,
                        y: this.properties.y - this.properties.oy,
                        scale: this.properties.scale.toFixed(6),
                        angle: parseInt(this.properties.deg)
                    };
                }
            }, {
                key: "reload",
                value: function(e) {
                    this.options = o(a, e), h.call(this), d.call(this), n.call(this), u.call(this);
                }
            }, {
                key: "destroy",
                value: function() {
                    this.properties.wrapper.innerHTML = "", this.properties.wrapper.className = this.properties.wrapper.className.replace("cropme-wrapper", ""), 
                    delete this.options, delete this.properties;
                }
            } ]), i;
        }(), a = {
            container: {
                width: 300,
                height: 300
            },
            viewport: {
                width: 100,
                height: 100,
                border: {
                    enable: !0,
                    width: 2,
                    color: "#fff"
                }
            },
            zoom: {
                min: .01,
                max: 3,
                enable: !0,
                mouseWheel: !0,
                slider: !1
            },
            customClass: "",
            rotation: {
                slider: !1,
                enable: !0,
                position: "right"
            }
        };
        e.exports = p;
    }, function(e, n, t) {
        "use strict";
        (function(e) {
            var t, i, r, o, s = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e;
            } : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
            };
            o = function() {
                return function(i) {
                    function r(e) {
                        if (o[e]) return o[e].exports;
                        var t = o[e] = {
                            exports: {},
                            id: e,
                            loaded: !1
                        };
                        return i[e].call(t.exports, t, t.exports, r), t.loaded = !0, t.exports;
                    }
                    var o = {};
                    return r.m = i, r.c = o, r.p = "", r(0);
                }([ function(e, t, i) {
                    function p(e, t, i) {
                        return t in e ? Object.defineProperty(e, t, {
                            value: i,
                            enumerable: !0,
                            configurable: !0,
                            writable: !0
                        }) : e[t] = i, e;
                    }
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    }), t.default = function e(t) {
                        for (var i = arguments.length, r = Array(1 < i ? i - 1 : 0), o = 1; o < i; o++) r[o - 1] = arguments[o];
                        if (!r.length) return t;
                        var s = r.shift();
                        if ((0, a.isObject)(t) && (0, a.isObject)(s)) for (var n in s) (0, a.isObject)(s[n]) ? (t[n] || Object.assign(t, p({}, n, {})), 
                        e(t[n], s[n])) : (0, l.isArray)(s[n]) ? (t[n] || Object.assign(t, p({}, n, [])), 
                        t[n] = t[n].concat(s[n])) : Object.assign(t, p({}, n, s[n]));
                        return e.apply(void 0, [ t ].concat(r));
                    };
                    var a = i(1), l = i(2);
                    e.exports = t.default;
                }, function(e, t) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    });
                    var i = "function" == typeof Symbol && "symbol" == s(Symbol.iterator) ? function(e) {
                        return void 0 === e ? "undefined" : s(e);
                    } : function(e) {
                        return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : void 0 === e ? "undefined" : s(e);
                    };
                    t.isObject = function(e) {
                        return e && "object" === (void 0 === e ? "undefined" : i(e)) && !Array.isArray(e);
                    };
                }, function(e, t) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    }), t.isArray = function(e) {
                        return e && Array.isArray(e);
                    };
                } ]);
            }, "object" == s(n) && "object" == s(e) ? e.exports = o() : (i = [], void 0 === (r = "function" == typeof (t = o) ? t.apply(n, i) : t) || (e.exports = r));
        }).call(this, t(4)(e));
    }, function(e, t, i) {
        "use strict";
        e.exports = function(e) {
            return e.webpackPolyfill || (e.deprecate = function() {}, e.paths = [], e.children || (e.children = []), 
            Object.defineProperty(e, "loaded", {
                enumerable: !0,
                get: function() {
                    return e.l;
                }
            }), Object.defineProperty(e, "id", {
                enumerable: !0,
                get: function() {
                    return e.i;
                }
            }), e.webpackPolyfill = 1), e;
        };
    } ]);
});